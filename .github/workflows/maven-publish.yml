name: CI - Build & Test (PetClinic)

on: 

  push: 

    branches: ["main"]

  pull_request:

    branches: ["main"]

  workflow_dispatch:
 
jobs:

  build-test:

    runs-on: ubuntu-latest
 
    steps:

      - name: checkout source code

        uses: actions/checkout@v6

      - name: setup java17

        uses: actions/setup-java@v5

        with:

          distribution: temurin

          java-version: "17"

          cache: maven

      - name: show versions

        run: |

            java -version

            ./mvnw -version
 
      - name: build

        run: ./mvnw clean package

      - name: run test

        run: ./mvnw -B test
 
      - name: upload artifacts

        if: always()

        uses: actions/upload-artifact@v4

        with:

          name: testreport1

          path: target/surefire-reports



 
